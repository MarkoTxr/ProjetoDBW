<!DOCTYPE html>
<html lang="pt">
  <head>
    <%- include("partials/head") %>
  </head>
  <body>
    <%- include("partials/header") %>

    <div class="container main-content">
      <div class="form-container-tabs mx-auto" style="max-width: 700px;">
        <h2 class="mb-4 text-center">Editar Perfil</h2>

        <form action="/editar-perfil" method="POST" enctype="multipart/form-data" class="card p-4" style="background-color: #1e1e1e; border: 1px solid #555;">
          <!-- Nome Completo -->
          <div class="mb-3">
            <label for="nome" class="form-label text-light">Nome Completo</label>
            <input
              type="text"
              class="form-control"
              id="nome"
              name="nome"
              value="<%= user.nome %>"
              required
            />
          </div>

          <!-- Nickname -->
          <div class="mb-3">
            <label for="nick" class="form-label text-light">Nickname</label>
            <input
              type="text"
              class="form-control"
              id="nick"
              name="nick"
              value="<%= user.nick %>"
            />
          </div>

          <!-- Email -->
          <div class="mb-3">
            <label for="email" class="form-label text-light">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              value="<%= user.email %>"
              required
            />
          </div>

          <!-- Upload de Imagem -->
          <div class="mb-3">
            <label for="imagemPerfil" class="form-label text-light">Imagem de Perfil</label>
            <input
              type="file"
              class="form-control"
              id="imagemPerfil"
              name="imagemPerfil"
              accept="image/*"
            />
            <% if (user.imagemPerfil) { %>
              <div class="mt-3 text-center">
                <img
                  src="<%= user.imagemPerfil %>"
                  alt="Imagem Atual"
                  class="rounded-circle pfp-image"
                  width="100"
                  height="100"
                />
                <p class="text-muted mt-2" style="font-size: 0.9rem;">Imagem atual</p>
              </div>
            <% } %>
          </div>

          <!-- Alteração de Password -->
          <div class="mt-4 mb-3">
            <h5 class="text-light mb-3">Alterar Password</h5>
            <div class="mb-3">
              <label for="currentPassword" class="form-label text-light">Password Atual</label>
              <input
                type="password"
                class="form-control"
                id="currentPassword"
                name="currentPassword"
              />
            </div>
            <div class="mb-3">
              <label for="newPassword" class="form-label text-light">Nova Password</label>
              <input
                type="password"
                class="form-control"
                id="newPassword"
                name="newPassword"
              />
            </div>
            <div class="mb-3">
              <label for="confirmPassword" class="form-label text-light">Confirmar Nova Password</label>
              <input
                type="password"
                class="form-control"
                id="confirmPassword"
                name="confirmPassword"
              />
            </div>
            <p class="text-muted" style="font-size: 0.85rem;">Deixe os campos em branco se não quiser alterar a password.</p>
          </div>

          <div class="text-center mt-4">
            <button type="submit" class="btn btn-custom">Salvar Alterações</button>
            <a href="/perfil" class="btn btn-secondary ms-2">Cancelar</a>
          </div>
        </form>
      </div>
    </div>

    <%- include("partials/footer") %>
  </body>
</html>
